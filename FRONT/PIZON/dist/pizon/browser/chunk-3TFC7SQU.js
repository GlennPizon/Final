import"./chunk-PYL45D43.js";import{a as A}from"./chunk-AKWIFSH2.js";import{b as ee,c as te,d as ie,f as x}from"./chunk-VP6CFJRX.js";import{A as n,Aa as T,B as t,C as f,D as q,E as h,F as u,H as o,I as p,N as c,P as O,R as j,U as w,V as I,W as C,X as V,Z as B,ea as G,fa as v,ga as P,ha as U,ia as $,ka as H,na as W,o as S,oa as z,pa as J,q as k,qa as K,r as R,ra as Q,s as m,t as s,ta as X,u as _,v as g,va as Y,w as l,xa as Z,y as d,ya as b}from"./chunk-Y3NWWHFQ.js";var ae=e=>["/employees/edit",e],de=e=>["/workflows",e];function le(e,r){e&1&&f(0,"span",13)}function pe(e,r){e&1&&(n(0,"span"),o(1,"Delete"),t())}function se(e,r){if(e&1){let i=q();n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td"),o(8),t(),n(9,"td"),o(10),O(11,"date"),t(),n(12,"td"),o(13),t(),n(14,"td",8)(15,"div",9)(16,"a",10),o(17,"Edit"),t(),n(18,"a",10),o(19,"Workflows"),t(),n(20,"button",11),h("click",function(){let N=k(i).$implicit,L=u();return R(L.deleteEmployee(N.id))}),l(21,le,1,0,"span",12)(22,pe,2,0,"span",7),t()()()()}if(e&2){let i=r.$implicit;m(2),p(i.employeeId),m(2),p(i.user==null?null:i.user.email),m(2),p(i.position),m(2),p(i.department==null?null:i.department.name),m(2),p(j(11,11,i.hireDate,"mediumDate")),m(3),p(i.status),m(3),d("routerLink",c(14,ae,i.id)),m(2),d("routerLink",c(16,de,i.id)),m(2),d("disabled",i.isDeleting),m(),d("ngIf",i.isDeleting),m(),d("ngIf",!i.isDeleting)}}function ce(e,r){e&1&&(n(0,"tr")(1,"td",14),o(2,"No employees found"),t()())}var D=class e{constructor(r){this.employeeService=r}employees=[];ngOnInit(){this.employeeService.getAll().subscribe(r=>this.employees=r)}deleteEmployee(r){let i=this.employees.find(a=>a.id===r);i.isDeleting=!0,this.employeeService.delete(r).subscribe(()=>this.employees=this.employees.filter(a=>a.id!==r))}static \u0275fac=function(i){return new(i||e)(s(x))};static \u0275cmp=_({type:e,selectors:[["ng-component"]],standalone:!1,decls:25,vars:2,consts:[[1,"p-4"],[1,"container"],["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","10%"],[2,"width","20%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-right"],[2,"display","flex","gap","0.5rem","justify-content","flex-end"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","7",1,"text-center"]],template:function(i,a){i&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Employees"),t(),n(4,"a",2),o(5,"Add Employee"),t(),n(6,"table",3)(7,"thead")(8,"tr")(9,"th",4),o(10,"Employee ID"),t(),n(11,"th",5),o(12,"User"),t(),n(13,"th",5),o(14,"Position"),t(),n(15,"th",5),o(16,"Department"),t(),n(17,"th",4),o(18,"Hire Date"),t(),n(19,"th",4),o(20,"Status"),t(),f(21,"th",4),t()(),n(22,"tbody"),l(23,se,23,18,"tr",6)(24,ce,3,0,"tr",7),t()()()()),i&2&&(m(23),d("ngForOf",a.employees),m(),d("ngIf",!(a.employees!=null&&a.employees.length)))},dependencies:[I,C,b,V],encapsulation:2})};var y=e=>({"is-invalid":e});function ue(e,r){e&1&&(n(0,"div"),o(1,"Employee ID is required"),t())}function fe(e,r){if(e&1&&(n(0,"div",17),l(1,ue,2,0,"div",18),t()),e&2){let i=u();m(),d("ngIf",i.f.employeeId.errors.required)}}function ve(e,r){if(e&1&&(n(0,"option",19),o(1),t()),e&2){let i=r.$implicit;d("value",i.id),m(),p(i.email)}}function ye(e,r){e&1&&(n(0,"div"),o(1,"User is required"),t())}function Ee(e,r){if(e&1&&(n(0,"div",17),l(1,ye,2,0,"div",18),t()),e&2){let i=u();m(),d("ngIf",i.f.userId.errors.required)}}function Se(e,r){e&1&&(n(0,"div"),o(1,"Position is required"),t())}function _e(e,r){if(e&1&&(n(0,"div",17),l(1,Se,2,0,"div",18),t()),e&2){let i=u();m(),d("ngIf",i.f.position.errors.required)}}function ge(e,r){if(e&1&&(n(0,"option",19),o(1),t()),e&2){let i=r.$implicit;d("value",i.id),m(),p(i.name)}}function he(e,r){e&1&&(n(0,"div"),o(1,"Department is required"),t())}function Ie(e,r){if(e&1&&(n(0,"div",17),l(1,he,2,0,"div",18),t()),e&2){let i=u();m(),d("ngIf",i.f.departmentId.errors.required)}}function Ce(e,r){e&1&&(n(0,"div"),o(1,"Hire Date is required"),t())}function be(e,r){if(e&1&&(n(0,"div",17),l(1,Ce,2,0,"div",18),t()),e&2){let i=u();m(),d("ngIf",i.f.hireDate.errors.required)}}function xe(e,r){e&1&&(n(0,"div",4)(1,"label"),o(2,"Status"),t(),n(3,"select",20)(4,"option",21),o(5,"Active"),t(),n(6,"option",22),o(7,"Inactive"),t()()())}var E=class e{constructor(r,i,a,N,L,De,Fe){this.formBuilder=r;this.route=i;this.router=a;this.employeeService=N;this.accountService=L;this.departmentService=De;this.alertService=Fe}form;id;isAddMode;users=[];departments=[];ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({employeeId:["",v.required],userId:["",v.required],position:["",v.required],departmentId:["",v.required],hireDate:["",v.required],status:["Active"]}),this.accountService.getAll().subscribe(r=>this.users=r),this.departmentService.getAll().subscribe(r=>this.departments=r),this.isAddMode||this.employeeService.getById(this.id).subscribe(r=>this.form.patchValue(r))}get f(){return this.form.controls}onSubmit(){this.form.invalid||(this.isAddMode?this.createEmployee():this.updateEmployee())}createEmployee(){this.employeeService.create(this.form.value).subscribe({next:()=>{this.alertService.success("Employee created successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/employees"])},error:r=>this.alertService.error(r)})}updateEmployee(){this.employeeService.update(this.id,this.form.value).subscribe({next:()=>{this.alertService.success("Employee updated successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/employees"])},error:r=>this.alertService.error(r)})}static \u0275fac=function(i){return new(i||e)(s(Q),s(Y),s(Z),s(x),s(ee),s(ie),s(te))};static \u0275cmp=_({type:e,selectors:[["ng-component"]],standalone:!1,decls:42,vars:26,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","employeeId",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","userId",1,"form-control",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","position",1,"form-control",3,"ngClass"],["formControlName","departmentId",1,"form-control",3,"ngClass"],["type","date","formControlName","hireDate",1,"form-control",3,"ngClass"],["class","form-group",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary","mr-1",3,"disabled"],["routerLink","/employees",1,"btn","btn-secondary"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],["formControlName","status",1,"form-control"],["value","Active"],["value","Inactive"]],template:function(i,a){i&1&&(n(0,"div",0)(1,"h3",1),o(2),t(),n(3,"div",2)(4,"form",3),h("ngSubmit",function(){return a.onSubmit()}),n(5,"div",4)(6,"label"),o(7,"Employee ID"),t(),f(8,"input",5),l(9,fe,2,1,"div",6),t(),n(10,"div",4)(11,"label"),o(12,"User"),t(),n(13,"select",7)(14,"option",8),o(15,"Select User"),t(),l(16,ve,2,2,"option",9),t(),l(17,Ee,2,1,"div",6),t(),n(18,"div",4)(19,"label"),o(20,"Position"),t(),f(21,"input",10),l(22,_e,2,1,"div",6),t(),n(23,"div",4)(24,"label"),o(25,"Department"),t(),n(26,"select",11)(27,"option",8),o(28,"Select Department"),t(),l(29,ge,2,2,"option",9),t(),l(30,Ie,2,1,"div",6),t(),n(31,"div",4)(32,"label"),o(33,"Hire Date"),t(),f(34,"input",12),l(35,be,2,1,"div",6),t(),l(36,xe,8,0,"div",13),n(37,"div",14)(38,"button",15),o(39,"Save"),t(),n(40,"a",16),o(41,"Cancel"),t()()()()()),i&2&&(m(2),p(a.isAddMode?"Add Employee":"Edit Employee"),m(2),d("formGroup",a.form),m(4),d("ngClass",c(16,y,a.f.employeeId.touched&&a.f.employeeId.errors)),m(),d("ngIf",a.f.employeeId.touched&&a.f.employeeId.errors),m(4),d("ngClass",c(18,y,a.f.userId.touched&&a.f.userId.errors)),m(3),d("ngForOf",a.users),m(),d("ngIf",a.f.userId.touched&&a.f.userId.errors),m(4),d("ngClass",c(20,y,a.f.position.touched&&a.f.position.errors)),m(),d("ngIf",a.f.position.touched&&a.f.position.errors),m(4),d("ngClass",c(22,y,a.f.departmentId.touched&&a.f.departmentId.errors)),m(3),d("ngForOf",a.departments),m(),d("ngIf",a.f.departmentId.touched&&a.f.departmentId.errors),m(4),d("ngClass",c(24,y,a.f.hireDate.touched&&a.f.hireDate.errors)),m(),d("ngIf",a.f.hireDate.touched&&a.f.hireDate.errors),m(),d("ngIf",!a.isAddMode),m(2),d("disabled",a.form.invalid))},dependencies:[w,I,C,$,J,K,G,z,P,U,H,W,b],encapsulation:2})};var Ae=[{path:"",component:D,canActivate:[A]},{path:"add",component:E,canActivate:[A],data:{roles:["Admin"]}},{path:"edit/:id",component:E,canActivate:[A],data:{roles:["Admin"]}}],F=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=g({type:e});static \u0275inj=S({imports:[T.forChild(Ae),T]})};var ne=class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=g({type:e});static \u0275inj=S({imports:[B,X,F]})};export{ne as EmployeesModule};
