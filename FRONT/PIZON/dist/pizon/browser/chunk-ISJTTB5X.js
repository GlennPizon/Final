import"./chunk-PYL45D43.js";import{a as j}from"./chunk-AKWIFSH2.js";import{c as h,e as x}from"./chunk-VP6CFJRX.js";import{A as r,Aa as L,B as i,C as y,D as R,E as u,F as c,H as n,I as v,J as D,N as d,O as M,P as T,Q as V,R as B,U as C,V as G,W as _,X as P,Y as q,Z as $,ea as J,fa as z,ga as H,ha as K,ia as Q,ka as U,na as X,o as w,oa as Y,pa as Z,q as W,qa as ee,r as F,ra as te,s as l,t as s,ta as ie,u as b,v as S,va as k,w as p,xa as re,y as m,ya as I}from"./chunk-Y3NWWHFQ.js";var ce=t=>["/workflows",t,"create"],de=(t,a,e)=>({"badge badge-warning":t,"badge badge-success":a,"badge badge-danger":e});function fe(t,a){if(t&1){let e=R();r(0,"button",12),u("click",function(){W(e);let f=c().$implicit,g=c();return F(g.updateStatus(f.id,"Approved"))}),n(1,"Approve"),i()}}function ue(t,a){if(t&1){let e=R();r(0,"button",13),u("click",function(){W(e);let f=c().$implicit,g=c();return F(g.updateStatus(f.id,"Rejected"))}),n(1,"Reject"),i()}}function ve(t,a){if(t&1&&(r(0,"tr")(1,"td"),n(2),i(),r(3,"td")(4,"span",9),n(5),i()(),r(6,"td"),n(7),T(8,"json"),i(),r(9,"td"),n(10),T(11,"date"),i(),r(12,"td",7),p(13,fe,2,0,"button",10)(14,ue,2,0,"button",11),i()()),t&2){let e=a.$implicit;l(2),v(e.type),l(2),m("ngClass",M(12,de,e.status==="Pending",e.status==="Approved",e.status==="Rejected")),l(),v(e.status),l(2),v(V(8,7,e.details)),l(3),v(B(11,9,e.createdAt,"medium")),l(3),m("ngIf",e.status==="Pending"),l(),m("ngIf",e.status==="Pending")}}function ge(t,a){t&1&&(r(0,"tr")(1,"td",14),n(2,"No workflows found"),i()())}var E=class t{constructor(a,e,o){this.route=a;this.workflowService=e;this.alertService=o}employeeId;workflows=[];ngOnInit(){this.employeeId=this.route.snapshot.params.employeeId,this.workflowService.getByEmployeeId(this.employeeId).subscribe(a=>this.workflows=a)}updateStatus(a,e){this.workflowService.updateStatus(a,e).subscribe({next:()=>{this.alertService.success(`Workflow ${e} successfully`),this.workflowService.getByEmployeeId(this.employeeId).subscribe(o=>this.workflows=o)},error:o=>this.alertService.error(o)})}static \u0275fac=function(e){return new(e||t)(s(k),s(x),s(h))};static \u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!1,decls:23,vars:6,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-right"],[1,"btn","btn-primary",3,"routerLink"],[3,"ngClass"],["class","btn btn-sm btn-success mr-1",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-success","mr-1",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],["colspan","5",1,"text-center"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"h3",1),n(2),i(),r(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead")(7,"tr")(8,"th"),n(9,"Type"),i(),r(10,"th"),n(11,"Status"),i(),r(12,"th"),n(13,"Details"),i(),r(14,"th"),n(15,"Created"),i(),y(16,"th"),i()(),r(17,"tbody"),p(18,ve,15,16,"tr",5)(19,ge,3,0,"tr",6),i()()(),r(20,"div",7)(21,"a",8),n(22,"Create Workflow"),i()()()()),e&2&&(l(2),D("Workflows for Employee ",o.employeeId,""),l(16),m("ngForOf",o.workflows),l(),m("ngIf",!(o.workflows!=null&&o.workflows.length)),l(2),m("routerLink",d(4,ce,o.employeeId)))},dependencies:[C,G,_,I,q,P],encapsulation:2})};var oe=t=>({"is-invalid":t}),we=t=>["/workflows",t];function be(t,a){t&1&&(r(0,"div"),n(1,"Type is required"),i())}function Se(t,a){if(t&1&&(r(0,"div",15),p(1,be,2,0,"div",16),i()),t&2){let e=c();l(),m("ngIf",e.f.type.errors.required)}}function ye(t,a){t&1&&(r(0,"div"),n(1,"Invalid JSON format"),i())}function Ce(t,a){if(t&1&&(r(0,"div",15),p(1,ye,2,0,"div",16),i()),t&2){let e=c();l(),m("ngIf",e.f.details.errors.required)}}var N=class t{constructor(a,e,o,f,g){this.formBuilder=a;this.route=e;this.router=o;this.workflowService=f;this.alertService=g}form;employeeId;ngOnInit(){this.employeeId=Number(this.route.snapshot.params.employeeId),this.form=this.formBuilder.group({type:["",z.required],details:[""]})}get f(){return this.form.controls}onSubmit(){if(this.form.invalid)return;let a={employeeId:this.employeeId,type:this.form.value.type,details:this.form.value.details||"{}"};this.workflowService.create(a).subscribe({next:()=>{this.alertService.success("Workflow created successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/workflows",this.employeeId])},error:e=>this.alertService.error(e)})}static \u0275fac=function(e){return new(e||t)(s(te),s(k),s(re),s(x),s(h))};static \u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!1,decls:28,vars:13,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","type",1,"form-control",3,"ngClass"],["value",""],["value","Onboarding"],["value","DepartmentChange"],["value","Termination"],["class","invalid-feedback",4,"ngIf"],["formControlName","details",1,"form-control",3,"ngClass"],[1,"text-center"],["type","submit",1,"btn","btn-primary","mr-1",3,"disabled"],[1,"btn","btn-secondary",3,"routerLink"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"h3",1),n(2,"Create Workflow"),i(),r(3,"div",2)(4,"form",3),u("ngSubmit",function(){return o.onSubmit()}),r(5,"div",4)(6,"label"),n(7,"Type"),i(),r(8,"select",5)(9,"option",6),n(10,"Select Type"),i(),r(11,"option",7),n(12,"Onboarding"),i(),r(13,"option",8),n(14,"Department Change"),i(),r(15,"option",9),n(16,"Termination"),i()(),p(17,Se,2,1,"div",10),i(),r(18,"div",4)(19,"label"),n(20,"Details (JSON)"),i(),y(21,"textarea",11),p(22,Ce,2,1,"div",10),i(),r(23,"div",12)(24,"button",13),n(25,"Create"),i(),r(26,"a",14),n(27,"Cancel"),i()()()()()),e&2&&(l(4),m("formGroup",o.form),l(4),m("ngClass",d(7,oe,o.f.type.touched&&o.f.type.errors)),l(9),m("ngIf",o.f.type.touched&&o.f.type.errors),l(4),m("ngClass",d(9,oe,o.f.details.touched&&o.f.details.errors)),l(),m("ngIf",o.f.details.touched&&o.f.details.errors),l(2),m("disabled",o.form.invalid),l(2),m("routerLink",d(11,we,o.employeeId)))},dependencies:[C,_,Q,Z,ee,J,Y,H,K,U,X,I],encapsulation:2})};var _e=[{path:":employeeId",component:E,canActivate:[j]},{path:":employeeId/create",component:N,canActivate:[j],data:{roles:["Admin"]}}],A=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=S({type:t});static \u0275inj=w({imports:[L.forChild(_e),L]})};var ne=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=S({type:t});static \u0275inj=w({imports:[$,ie,A]})};export{ne as WorkflowsModule};
