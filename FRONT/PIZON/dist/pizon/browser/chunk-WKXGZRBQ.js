import{c as U}from"./chunk-LKLDYXYD.js";import"./chunk-AKWIFSH2.js";import{b as g,c as b}from"./chunk-VP6CFJRX.js";import{A as r,Aa as W,B as i,C as p,D as te,E as w,F as f,H as m,N as u,U as I,W as _,Z as ie,aa as re,da as ne,ea as x,fa as c,ga as E,ha as R,ia as N,j as Z,k as y,ka as P,na as T,o as j,oa as oe,pa as ae,q as $,qa as se,r as ee,s,sa as F,t as d,ta as me,u as v,v as D,va as k,w as l,wa as le,xa as S,y as a,ya as C}from"./chunk-Y3NWWHFQ.js";var G=class e{constructor(o,t){this.router=o;this.accountService=t;this.accountService.accountValue&&this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||e)(d(S),d(g))};static \u0275cmp=v({type:e,selectors:[["ng-component"]],standalone:!1,decls:5,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-sm-8","offset-sm-2","mt-5"],[1,"card","m-3"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),p(4,"router-outlet"),i()()()())},dependencies:[le],encapsulation:2})};var de=e=>({"is-invalid":e});function ve(e,o){e&1&&(r(0,"div"),m(1,"Email is required"),i())}function ge(e,o){e&1&&(r(0,"div"),m(1,"Email is invalid"),i())}function _e(e,o){if(e&1&&(r(0,"div",14),l(1,ve,2,0,"div",15)(2,ge,2,0,"div",15),i()),e&2){let t=f();s(),a("ngIf",t.f.email.errors.required),s(),a("ngIf",t.f.email.errors.email)}}function Se(e,o){e&1&&(r(0,"div"),m(1,"Password is required"),i())}function Ce(e,o){if(e&1&&(r(0,"div",14),l(1,Se,2,0,"div",15),i()),e&2){let t=f();s(),a("ngIf",t.f.password.errors.required)}}function be(e,o){e&1&&p(0,"span",16)}var ye="angular-19-boilerplate-accounts",B=class e{constructor(o,t,n,h,Y,rt){this.formBuilder=o;this.route=t;this.router=n;this.accountService=h;this.alertService=Y;this.http=rt}form;loading=!1;submitted=!1;ngOnInit(){this.form=this.formBuilder.group({email:["",[c.required,c.email]],password:["",c.required]});let o="/accounts/all";console.log("Attempting to fetch public accounts from:",o),this.http.get(o).subscribe({next:t=>{console.log("Successfully fetched public accounts:",t)},error:t=>{console.error("Error fetching public accounts:",t)}})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.login(this.f.email.value,this.f.password.value).pipe(y()).subscribe({next:()=>{let o=this.route.snapshot.queryParams.returnUrl||"/";this.router.navigateByUrl(o)},error:o=>{this.alertService.error(o),this.loading=!1}}))}resetFakeBackendStorage(){localStorage.removeItem(ye),location.reload()}static \u0275fac=function(t){return new(t||e)(d(F),d(k),d(S),d(g),d(b),d(re))};static \u0275cmp=v({type:e,selectors:[["ng-component"]],standalone:!1,decls:24,vars:11,consts:[[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"form-row"],[1,"form-group","col"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../register",1,"btn","btn-link"],[1,"form-group","col","text-right"],["routerLink","../forgot-password",1,"btn","btn-link","pr-0"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,n){t&1&&(r(0,"h3",0),m(1,"Login"),i(),r(2,"div",1)(3,"form",2),w("ngSubmit",function(){return n.onSubmit()}),r(4,"div",3)(5,"label"),m(6,"Email"),i(),p(7,"input",4),l(8,_e,3,2,"div",5),i(),r(9,"div",3)(10,"label"),m(11,"Password"),i(),p(12,"input",6),l(13,Ce,2,1,"div",5),i(),r(14,"div",7)(15,"div",8)(16,"button",9),l(17,be,1,0,"span",10),m(18," Login "),i(),r(19,"a",11),m(20,"Register"),i()(),r(21,"div",12)(22,"a",13),m(23,"Forgot Password?"),i()()()()()),t&2&&(s(3),a("formGroup",n.form),s(4),a("ngClass",u(7,de,n.submitted&&n.f.email.errors)),s(),a("ngIf",n.submitted&&n.f.email.errors),s(4),a("ngClass",u(9,de,n.submitted&&n.f.password.errors)),s(),a("ngIf",n.submitted&&n.f.password.errors),s(3),a("disabled",n.loading),s(),a("ngIf",n.loading))},dependencies:[I,_,C,N,x,E,R,P,T],encapsulation:2})};var q=e=>({"is-invalid":e});function he(e,o){e&1&&(r(0,"div"),m(1,"Title is required"),i())}function we(e,o){if(e&1&&(r(0,"div",25),l(1,he,2,0,"div",26),i()),e&2){let t=f();s(),a("ngIf",t.f.title.errors.required)}}function Ie(e,o){e&1&&(r(0,"div"),m(1,"First Name is required"),i())}function xe(e,o){if(e&1&&(r(0,"div",25),l(1,Ie,2,0,"div",26),i()),e&2){let t=f();s(),a("ngIf",t.f.firstName.errors.required)}}function Ee(e,o){e&1&&(r(0,"div"),m(1,"Last Name is required"),i())}function Re(e,o){if(e&1&&(r(0,"div",25),l(1,Ee,2,0,"div",26),i()),e&2){let t=f();s(),a("ngIf",t.f.lastName.errors.required)}}function Ne(e,o){e&1&&(r(0,"div"),m(1,"Email is required"),i())}function Pe(e,o){e&1&&(r(0,"div"),m(1,"Email must be a valid email address"),i())}function Te(e,o){if(e&1&&(r(0,"div",25),l(1,Ne,2,0,"div",26)(2,Pe,2,0,"div",26),i()),e&2){let t=f();s(),a("ngIf",t.f.email.errors.required),s(),a("ngIf",t.f.email.errors.email)}}function Fe(e,o){e&1&&(r(0,"div"),m(1,"Password is required"),i())}function ke(e,o){e&1&&(r(0,"div"),m(1,"Password must be at least 6 characters"),i())}function Ae(e,o){if(e&1&&(r(0,"div",25),l(1,Fe,2,0,"div",26)(2,ke,2,0,"div",26),i()),e&2){let t=f();s(),a("ngIf",t.f.password.errors.required),s(),a("ngIf",t.f.password.errors.minlength)}}function qe(e,o){e&1&&(r(0,"div"),m(1,"Confirm Password is required"),i())}function Ve(e,o){e&1&&(r(0,"div"),m(1,"Passwords must match"),i())}function Le(e,o){if(e&1&&(r(0,"div",25),l(1,qe,2,0,"div",26)(2,Ve,2,0,"div",26),i()),e&2){let t=f();s(),a("ngIf",t.f.confirmPassword.errors.required),s(),a("ngIf",t.f.confirmPassword.errors.mustMatch)}}function Me(e,o){e&1&&(r(0,"div",25),m(1,"Accept Ts & Cs is required"),i())}function je(e,o){e&1&&p(0,"span",27)}var H=class e{constructor(o,t,n,h,Y){this.formBuilder=o;this.route=t;this.router=n;this.accountService=h;this.alertService=Y}form;loading=!1;submitted=!1;ngOnInit(){this.form=this.formBuilder.group({title:["",c.required],firstName:["",c.required],lastName:["",c.required],email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],confirmPassword:["",c.required],acceptTerms:[!1,c.requiredTrue],status:["Enabled"]},{validator:U("password","confirmPassword")})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.register(this.form.value).pipe(y()).subscribe({next:o=>{this.alertService.success("Registration successful, please check your email for verification instructions",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:o=>{this.alertService.error(o),this.loading=!1}}))}static \u0275fac=function(t){return new(t||e)(d(F),d(k),d(S),d(g),d(b))};static \u0275cmp=v({type:e,selectors:[["ng-component"]],standalone:!1,decls:56,vars:31,consts:[[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group","col"],["formControlName","title",1,"form-control",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","col-5"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"form-group"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"form-group","form-check"],["type","checkbox","formControlName","acceptTerms","id","acceptTerms",1,"form-check-input",3,"ngClass"],["for","acceptTerms",1,"form-check-label"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../login","href","",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,n){t&1&&(r(0,"h3",0),m(1,"Register"),i(),r(2,"div",1)(3,"form",2),w("ngSubmit",function(){return n.onSubmit()}),r(4,"div",3)(5,"div",4)(6,"label"),m(7,"Title"),i(),r(8,"select",5),p(9,"option",6),r(10,"option",7),m(11,"Mr"),i(),r(12,"option",8),m(13,"Mrs"),i(),r(14,"option",9),m(15,"Miss"),i(),r(16,"option",10),m(17,"Ms"),i()(),l(18,we,2,1,"div",11),i(),r(19,"div",12)(20,"label"),m(21,"First Name"),i(),p(22,"input",13),l(23,xe,2,1,"div",11),i(),r(24,"div",12)(25,"label"),m(26,"Last Name"),i(),p(27,"input",14),l(28,Re,2,1,"div",11),i()(),r(29,"div",15)(30,"label"),m(31,"Email"),i(),p(32,"input",16),l(33,Te,3,2,"div",11),i(),r(34,"div",3)(35,"div",4)(36,"label"),m(37,"Password"),i(),p(38,"input",17),l(39,Ae,3,2,"div",11),i(),r(40,"div",4)(41,"label"),m(42,"Confirm Password"),i(),p(43,"input",18),l(44,Le,3,2,"div",11),i()(),r(45,"div",19),p(46,"input",20),r(47,"label",21),m(48,"Accept Terms & Conditions"),i(),l(49,Me,2,0,"div",11),i(),r(50,"div",15)(51,"button",22),l(52,je,1,0,"span",23),m(53," Register "),i(),r(54,"a",24),m(55,"Cancel"),i()()()()),t&2&&(s(3),a("formGroup",n.form),s(5),a("ngClass",u(17,q,n.submitted&&n.f.title.errors)),s(10),a("ngIf",n.submitted&&n.f.title.errors),s(4),a("ngClass",u(19,q,n.submitted&&n.f.firstName.errors)),s(),a("ngIf",n.submitted&&n.f.firstName.errors),s(4),a("ngClass",u(21,q,n.submitted&&n.f.lastName.errors)),s(),a("ngIf",n.submitted&&n.f.lastName.errors),s(4),a("ngClass",u(23,q,n.submitted&&n.f.email.errors)),s(),a("ngIf",n.submitted&&n.f.email.errors),s(5),a("ngClass",u(25,q,n.submitted&&n.f.password.errors)),s(),a("ngIf",n.submitted&&n.f.password.errors),s(4),a("ngClass",u(27,q,n.submitted&&n.f.confirmPassword.errors)),s(),a("ngIf",n.submitted&&n.f.confirmPassword.errors),s(2),a("ngClass",u(29,q,n.submitted&&n.f.acceptTerms.errors)),s(3),a("ngIf",n.submitted&&n.f.acceptTerms.errors),s(2),a("disabled",n.loading),s(),a("ngIf",n.loading))},dependencies:[I,_,C,N,ae,se,x,ne,oe,E,R,P,T],encapsulation:2})};function De(e,o){e&1&&(r(0,"div"),m(1," Verifying... "),i())}function Ue(e,o){e&1&&(r(0,"div"),m(1," Verification failed, you can also verify your account using the "),r(2,"a",3),m(3,"forgot password"),i(),m(4," page. "),i())}var pe=(t=>(t[t.Verifying=0]="Verifying",t[t.Failed=1]="Failed",t))(pe||{}),z=class e{constructor(o,t,n,h){this.route=o;this.router=t;this.accountService=n;this.alertService=h}EmailStatus=pe;emailStatus=0;ngOnInit(){let o=this.route.snapshot.queryParams.token;this.router.navigate([],{relativeTo:this.route,replaceUrl:!0})}static \u0275fac=function(t){return new(t||e)(d(k),d(S),d(g),d(b))};static \u0275cmp=v({type:e,selectors:[["ng-component"]],standalone:!1,decls:5,vars:2,consts:[[1,"card-header"],[1,"card-body"],[4,"ngIf"],["routerLink","forgot-password"]],template:function(t,n){t&1&&(r(0,"h3",0),m(1,"Verify Email"),i(),r(2,"div",1),l(3,De,2,0,"div",2)(4,Ue,5,0,"div",2),i()),t&2&&(s(3),a("ngIf",n.emailStatus==n.EmailStatus.Verifying),s(),a("ngIf",n.emailStatus==n.EmailStatus.Failed))},dependencies:[_,C],encapsulation:2})};var Ge=e=>({"is-invalid":e});function Be(e,o){e&1&&(r(0,"div"),m(1,"Email is required"),i())}function Oe(e,o){e&1&&(r(0,"div"),m(1,"Email is invalid"),i())}function He(e,o){if(e&1&&(r(0,"div",9),l(1,Be,2,0,"div",10)(2,Oe,2,0,"div",10),i()),e&2){let t=f();s(),a("ngIf",t.f.email.errors.required),s(),a("ngIf",t.f.email.errors.email)}}function ze(e,o){e&1&&p(0,"span",11)}var K=class e{constructor(o,t,n){this.formBuilder=o;this.accountService=t;this.alertService=n}form;loading=!1;submitted=!1;ngOnInit(){this.form=this.formBuilder.group({email:["",[c.required,c.email]]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.alertService.clear(),this.accountService.forgotPassword(this.f.email.value).pipe(y()).pipe(Z(()=>this.loading=!1)).subscribe({next:()=>this.alertService.success("Please check your email for password reset instructions"),error:o=>this.alertService.error(o)}))}static \u0275fac=function(t){return new(t||e)(d(F),d(g),d(b))};static \u0275cmp=v({type:e,selectors:[["ng-component"]],standalone:!1,decls:15,vars:7,consts:[[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../login",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,n){t&1&&(r(0,"h3",0),m(1,"Forgot Password"),i(),r(2,"div",1)(3,"form",2),w("ngSubmit",function(){return n.onSubmit()}),r(4,"div",3)(5,"label"),m(6,"Email"),i(),p(7,"input",4),l(8,He,3,2,"div",5),i(),r(9,"div",3)(10,"button",6),l(11,ze,1,0,"span",7),m(12," Submit "),i(),r(13,"a",8),m(14,"Cancel"),i()()()()),t&2&&(s(3),a("formGroup",n.form),s(4),a("ngClass",u(5,Ge,n.submitted&&n.f.email.errors)),s(),a("ngIf",n.submitted&&n.f.email.errors),s(2),a("disabled",n.loading),s(),a("ngIf",n.loading))},dependencies:[I,_,C,N,x,E,R,P,T],encapsulation:2})};var ce=e=>({"is-invalid":e});function Ke(e,o){e&1&&(r(0,"div"),m(1," Validating token... "),i())}function Qe(e,o){e&1&&(r(0,"div"),m(1," Token validation failed, if the token has expired you can get a new one at the "),r(2,"a",4),m(3,"forgot password"),i(),m(4," page. "),i())}function Je(e,o){e&1&&(r(0,"div"),m(1,"Password is required"),i())}function We(e,o){e&1&&(r(0,"div"),m(1,"Password must be at least 6 characters"),i())}function Xe(e,o){if(e&1&&(r(0,"div",13),l(1,Je,2,0,"div",2)(2,We,2,0,"div",2),i()),e&2){let t=f(2);s(),a("ngIf",t.f.password.errors.required),s(),a("ngIf",t.f.password.errors.minlength)}}function Ye(e,o){e&1&&(r(0,"div"),m(1,"Confirm Password is required"),i())}function Ze(e,o){e&1&&(r(0,"div"),m(1,"Passwords must match"),i())}function $e(e,o){if(e&1&&(r(0,"div",13),l(1,Ye,2,0,"div",2)(2,Ze,2,0,"div",2),i()),e&2){let t=f(2);s(),a("ngIf",t.f.confirmPassword.errors.required),s(),a("ngIf",t.f.confirmPassword.errors.mustMatch)}}function et(e,o){e&1&&p(0,"span",14)}function tt(e,o){if(e&1){let t=te();r(0,"form",5),w("ngSubmit",function(){$(t);let h=f();return ee(h.onSubmit())}),r(1,"div",6)(2,"label"),m(3,"Password"),i(),p(4,"input",7),l(5,Xe,3,2,"div",8),i(),r(6,"div",6)(7,"label"),m(8,"Confirm Password"),i(),p(9,"input",9),l(10,$e,3,2,"div",8),i(),r(11,"div",6)(12,"button",10),l(13,et,1,0,"span",11),m(14," Reset Password "),i(),r(15,"a",12),m(16,"Cancel"),i()()()}if(e&2){let t=f();a("formGroup",t.form),s(4),a("ngClass",u(7,ce,t.submitted&&t.f.password.errors)),s(),a("ngIf",t.submitted&&t.f.password.errors),s(4),a("ngClass",u(9,ce,t.submitted&&t.f.confirmPassword.errors)),s(),a("ngIf",t.submitted&&t.f.confirmPassword.errors),s(2),a("disabled",t.loading),s(),a("ngIf",t.loading)}}var fe=(n=>(n[n.Validating=0]="Validating",n[n.Valid=1]="Valid",n[n.Invalid=2]="Invalid",n))(fe||{}),Q=class e{constructor(o,t,n,h,Y){this.formBuilder=o;this.route=t;this.router=n;this.accountService=h;this.alertService=Y}TokenStatus=fe;tokenStatus=0;token=null;form;loading=!1;submitted=!1;ngOnInit(){this.form=this.formBuilder.group({password:["",[c.required,c.minLength(6)]],confirmPassword:["",c.required]},{validator:U("password","confirmPassword")});let o=this.route.snapshot.queryParams.token,t=typeof o=="string"?o:null;if(this.router.navigate([],{relativeTo:this.route,replaceUrl:!0}),!t){this.tokenStatus=2;return}this.accountService.validateResetToken(t).pipe(y()).subscribe({next:()=>{this.token=t,this.tokenStatus=1},error:()=>{this.tokenStatus=2}})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.resetPassword(this.token,this.f.password.value,this.f.confirmPassword.value).pipe(y()).subscribe({next:()=>{this.alertService.success("Password reset successful, you can now login",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:o=>{this.alertService.error(o),this.loading=!1}}))}static \u0275fac=function(t){return new(t||e)(d(F),d(k),d(S),d(g),d(b))};static \u0275cmp=v({type:e,selectors:[["ng-component"]],standalone:!1,decls:6,vars:3,consts:[[1,"card-header"],[1,"card-body"],[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["routerLink","../forgot-password"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../login",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,n){t&1&&(r(0,"h3",0),m(1,"Reset Password"),i(),r(2,"div",1),l(3,Ke,2,0,"div",2)(4,Qe,5,0,"div",2)(5,tt,17,11,"form",3),i()),t&2&&(s(3),a("ngIf",n.tokenStatus==n.TokenStatus.Validating),s(),a("ngIf",n.tokenStatus==n.TokenStatus.Invalid),s(),a("ngIf",n.tokenStatus==n.TokenStatus.Valid))},dependencies:[I,_,C,N,x,E,R,P,T],encapsulation:2})};var it=[{path:"",component:G,children:[{path:"login",component:B},{path:"register",component:H},{path:"verify-email",component:z},{path:"forgot-password",component:K},{path:"reset-password",component:Q}]}],J=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=D({type:e});static \u0275inj=j({imports:[W.forChild(it),W]})};var ue=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=D({type:e});static \u0275inj=j({imports:[ie,J,me]})};export{ue as AccountsModule};
