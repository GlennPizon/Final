import{c as X}from"./chunk-LKLDYXYD.js";import{a as W}from"./chunk-AKWIFSH2.js";import{b,c as Q}from"./chunk-VP6CFJRX.js";import{A as i,Aa as w,B as t,C as l,E as M,F as c,H as r,J as S,L as T,N as u,U as F,W as P,Z as A,ea as D,fa as f,ga as R,ha as q,ia as L,k as U,ka as k,na as j,o as C,oa as O,pa as G,qa as V,s as a,sa as B,t as p,ta as z,u as v,v as _,va as H,w as d,wa as J,xa as K,y as s,ya as y}from"./chunk-Y3NWWHFQ.js";var h=class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=v({type:e,selectors:[["ng-component"]],standalone:!1,decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(o,n){o&1&&(i(0,"div",0)(1,"div",1),l(2,"router-outlet"),t()())},dependencies:[J],encapsulation:2})};var E=class e{constructor(m){this.accountService=m}account;ngOnInit(){this.account=this.accountService.accountValue}static \u0275fac=function(o){return new(o||e)(p(b))};static \u0275cmp=v({type:e,selectors:[["ng-component"]],standalone:!1,decls:22,vars:6,consts:[["routerLink","update"]],template:function(o,n){o&1&&(i(0,"h1"),r(1,"My Profile"),t(),i(2,"p")(3,"strong"),r(4,"Name: "),t(),r(5),l(6,"br"),i(7,"strong"),r(8,"Email: "),t(),r(9),l(10,"br"),i(11,"strong"),r(12,"Role: "),t(),r(13),l(14,"br"),i(15,"strong"),r(16,"Status: "),t(),r(17),l(18,"br"),t(),i(19,"p")(20,"a",0),r(21,"Update Profile"),t()()),o&2&&(a(5),T(" ",n.account.title," ",n.account.firstName," ",n.account.lastName,""),a(4),S(" ",n.account.email,""),a(4),S(" ",n.account.role,""),a(4),S(" ",n.account.status,""))},dependencies:[y],encapsulation:2})};var g=e=>({"is-invalid":e});function ie(e,m){e&1&&(i(0,"div"),r(1,"Title is required"),t())}function ne(e,m){if(e&1&&(i(0,"div",21),d(1,ie,2,0,"div",22),t()),e&2){let o=c();a(),s("ngIf",o.f.title.errors.required)}}function re(e,m){e&1&&(i(0,"div"),r(1,"First Name is required"),t())}function oe(e,m){if(e&1&&(i(0,"div",21),d(1,re,2,0,"div",22),t()),e&2){let o=c();a(),s("ngIf",o.f.firstName.errors.required)}}function ae(e,m){e&1&&(i(0,"div"),r(1,"Last Name is required"),t())}function me(e,m){if(e&1&&(i(0,"div",21),d(1,ae,2,0,"div",22),t()),e&2){let o=c();a(),s("ngIf",o.f.lastName.errors.required)}}function se(e,m){e&1&&(i(0,"div"),r(1,"Email is required"),t())}function le(e,m){e&1&&(i(0,"div"),r(1,"Email must be a valid email address"),t())}function de(e,m){if(e&1&&(i(0,"div",21),d(1,se,2,0,"div",22)(2,le,2,0,"div",22),t()),e&2){let o=c();a(),s("ngIf",o.f.email.errors.required),a(),s("ngIf",o.f.email.errors.email)}}function pe(e,m){e&1&&(i(0,"div"),r(1,"Password is required"),t())}function ce(e,m){e&1&&(i(0,"div"),r(1,"Password must be at least 6 characters"),t())}function ue(e,m){if(e&1&&(i(0,"div",21),d(1,pe,2,0,"div",22)(2,ce,2,0,"div",22),t()),e&2){let o=c();a(),s("ngIf",o.f.password.errors.required),a(),s("ngIf",o.f.password.errors.minlength)}}function fe(e,m){e&1&&(i(0,"div"),r(1,"Confirm Password is required"),t())}function ve(e,m){e&1&&(i(0,"div"),r(1,"Passwords must match"),t())}function ge(e,m){if(e&1&&(i(0,"div",21),d(1,fe,2,0,"div",22)(2,ve,2,0,"div",22),t()),e&2){let o=c();a(),s("ngIf",o.f.confirmPassword.errors.required),a(),s("ngIf",o.f.confirmPassword.errors.mustMatch)}}function Ce(e,m){e&1&&l(0,"span",23)}var N=class e{constructor(m,o,n,ee,Se){this.formBuilder=m;this.route=o;this.router=n;this.accountService=ee;this.alertService=Se}account;form;loading=!1;submitted=!1;deleting=!1;ngOnInit(){this.account=this.accountService.accountValue,this.form=this.formBuilder.group({title:[this.account?.title||"",f.required],firstName:[this.account?.firstName||"",f.required],lastName:[this.account?.lastName||"",f.required],email:[this.account?.email||"",[f.required,f.email]],password:["",[f.minLength(6)]],confirmPassword:[""]},{validator:X("password","confirmPassword")})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.update(this.account?.id,this.form.value).pipe(U()).subscribe({next:()=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:m=>{this.alertService.error(m),this.loading=!1}}))}onDelete(){confirm("Are you sure?")&&(this.deleting=!0,this.accountService.delete(this.account?.id).pipe(U()).subscribe({next:()=>{this.alertService.success("Account deleted successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/"])},error:m=>{this.alertService.error(m),this.deleting=!1}}))}static \u0275fac=function(o){return new(o||e)(p(B),p(H),p(K),p(b),p(Q))};static \u0275cmp=v({type:e,selectors:[["ng-component"]],standalone:!1,decls:54,vars:27,consts:[[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group","col"],["formControlName","title",1,"form-control",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","col-5"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"form-group"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],[1,"pt-3"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary","mr-2",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../","href","",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(o,n){o&1&&(i(0,"h1"),r(1,"Update Profile"),t(),i(2,"form",0),M("ngSubmit",function(){return n.onSubmit()}),i(3,"div",1)(4,"div",2)(5,"label"),r(6,"Title"),t(),i(7,"select",3),l(8,"option",4),i(9,"option",5),r(10,"Mr"),t(),i(11,"option",6),r(12,"Mrs"),t(),i(13,"option",7),r(14,"Miss"),t(),i(15,"option",8),r(16,"Ms"),t()(),d(17,ne,2,1,"div",9),t(),i(18,"div",10)(19,"label"),r(20,"First Name"),t(),l(21,"input",11),d(22,oe,2,1,"div",9),t(),i(23,"div",10)(24,"label"),r(25,"Last Name"),t(),l(26,"input",12),d(27,me,2,1,"div",9),t()(),i(28,"div",13)(29,"label"),r(30,"Email"),t(),l(31,"input",14),d(32,de,3,2,"div",9),t(),i(33,"h3",15),r(34,"Change Password"),t(),i(35,"p"),r(36,"Leave blank to keep the same password"),t(),i(37,"div",1)(38,"div",2)(39,"label"),r(40,"Password"),t(),l(41,"input",16),d(42,ue,3,2,"div",9),t(),i(43,"div",2)(44,"label"),r(45,"Confirm Password"),t(),l(46,"input",17),d(47,ge,3,2,"div",9),t()(),i(48,"div",13)(49,"button",18),d(50,Ce,1,0,"span",19),r(51," Update "),t(),i(52,"a",20),r(53,"Cancel"),t()()()),o&2&&(a(2),s("formGroup",n.form),a(5),s("ngClass",u(15,g,n.submitted&&n.f.title.errors)),a(10),s("ngIf",n.submitted&&n.f.title.errors),a(4),s("ngClass",u(17,g,n.submitted&&n.f.firstName.errors)),a(),s("ngIf",n.submitted&&n.f.firstName.errors),a(4),s("ngClass",u(19,g,n.submitted&&n.f.lastName.errors)),a(),s("ngIf",n.submitted&&n.f.lastName.errors),a(4),s("ngClass",u(21,g,n.submitted&&n.f.email.errors)),a(),s("ngIf",n.submitted&&n.f.email.errors),a(9),s("ngClass",u(23,g,n.submitted&&n.f.password.errors)),a(),s("ngIf",n.submitted&&n.f.password.errors),a(4),s("ngClass",u(25,g,n.submitted&&n.f.confirmPassword.errors)),a(),s("ngIf",n.submitted&&n.f.confirmPassword.errors),a(2),s("disabled",n.loading),a(),s("ngIf",n.loading))},dependencies:[F,P,L,G,V,D,O,R,q,k,j,y],encapsulation:2})};var _e=[{path:"",component:h,canActivate:[W],children:[{path:"",component:E},{path:"edit",component:N}]}],I=class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=_({type:e});static \u0275inj=C({imports:[w.forChild(_e),w]})};var $=class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=_({type:e});static \u0275inj=C({imports:[A,z,I]})};export{$ as ProfileModule};
